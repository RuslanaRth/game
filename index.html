<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Кенчик тест</title>
<style>
  body { 
    margin:0; 
    overflow:hidden; 
  }
  #ken { 
    position:absolute; 
    bottom:0; /* Кенчик на краю экрана */
    left:50px; 
    width:384px;  
    height:384px; 
    z-index:1;
    filter: brightness(1.5); /* Яркость спрайта */
  }
</style>
</head>
<body>
<!-- Фон JPG -->
<img src="back1.jpg" style="width:100%; height:100%; position:absolute; z-index:0;">

<!-- Спрайт Кенчика -->
<img id="ken" src="idle.png" alt="Кенчик">

<script>
const ken = document.getElementById('ken');

// Спрайты
const walkFrames = ["walk1.png","walk2.png"];
const idleFrames = ["idle.png","idle2.png"];
let frameIndex = 0;
let frameCounter = 0; // для плавной смены ноги
let idleIndex = 0;
let posX = 50;

// Анимация idle
setInterval(()=>{
  if(!ken.classList.contains("moving")){
    ken.src = idleFrames[idleIndex];
    idleIndex = (idleIndex + 1) % idleFrames.length;
  }
}, 500);

// Управление
document.addEventListener('keydown', (e) => {
  ken.classList.add("moving");

  if(e.key === "ArrowRight"){
    posX += 5;
    ken.style.left = posX + "px";
    ken.style.transform = "scaleX(1)";

    frameCounter++;
    if(frameCounter >= 5){ 
      frameCounter = 0;
      frameIndex = (frameIndex + 1) % walkFrames.length;
      ken.src = walkFrames[frameIndex];
    }
  }

  if(e.key === "ArrowLeft"){
    posX -= 5;
    ken.style.left = posX + "px";
    ken.style.transform = "scaleX(-1)";

    frameCounter++;
    if(frameCounter >= 5){
      frameCounter = 0;
      frameIndex = (frameIndex + 1) % walkFrames.length;
      ken.src = walkFrames[frameIndex];
    }
  }

  if(e.key === " "){
    ken.src = "punch.png";
    setTimeout(() => ken.src = "idle.png", 200);
  }
});

document.addEventListener('keyup', ()=>{ ken.classList.remove("moving"); });
</script>
</body>
</html>

