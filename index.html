<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Кенчик тест</title>
<style>
  body { 
    margin:0; 
    background:#a0d8f0; 
    overflow:hidden; /* чтобы Кен не выходил за экран */
  }
  #ken { 
    position:absolute; 
    bottom:50px; 
    left:50px; 
    width:256px;  /* увеличиваем размер спрайта */
    height:256px; 
  }
</style>
</head>
<body>
<img id="ken" src="idle.png" alt="Кенчик">

<script>
const ken = document.getElementById('ken');

// Спрайты
const walkFrames = ["walk1.png","walk2.png"];
const idleFrames = ["idle.png","idle2.png"];
let frameIndex = 0;
let frameCounter = 0; // для плавной смены ноги
let idleIndex = 0;
let posX = 50;

// Анимация idle
setInterval(()=>{
  if(!ken.classList.contains("moving")){
    ken.src = idleFrames[idleIndex];
    idleIndex = (idleIndex + 1) % idleFrames.length;
  }
}, 500);

// Управление
document.addEventListener('keydown', (e) => {
  ken.classList.add("moving");

  if(e.key === "ArrowRight"){
    posX += 5;
    ken.style.left = posX + "px";
    ken.style.transform = "scaleX(1)";

    frameCounter++;
    if(frameCounter >= 5){ // 5 кадров на одну ногу
      frameCounter = 0;
      frameIndex = (frameIndex + 1) % walkFrames.length;
      ken.src = walkFrames[frameIndex];
    }
  }

  if(e.key === "ArrowLeft"){
    posX -= 5;
    ken.style.left = posX + "px";
    ken.style.transform = "scaleX(-1)";

    frameCounter++;
    if(frameCounter >= 5){
      frameCounter = 0;
      frameIndex = (frameIndex + 1) % walkFrames.length;
      ken.src = walkFrames[frameIndex];
    }
  }

  if(e.key === " "){
    ken.src = "punch.png";
    setTimeout(() => ken.src = "idle.png", 200);
  }
});

document.addEventListener('keyup', ()=>{ ken.classList.remove("moving"); });
</script>
</body>
</html>
